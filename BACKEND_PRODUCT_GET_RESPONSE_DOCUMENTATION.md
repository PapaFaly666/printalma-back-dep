# Documentation - Structure des Donn√©es GET /products

## üéØ Vue d'ensemble

Cette documentation d√©taille **exactement** ce que le backend retourne quand on fait `GET /api/products`.

---

## üìä Structure de R√©ponse Compl√®te

### **Format de Base**
L'endpoint retourne un **tableau JSON** avec tous les produits et leurs relations compl√®tes.

```json
[
  {
    "id": 1,
    "name": "T-Shirt Premium Bio",
    "price": 8500,
    "stock": 150,
    "status": "PUBLISHED",
    "description": "Un t-shirt doux et r√©sistant en coton bio, parfait pour l'impression personnalis√©e",
    "createdAt": "2024-01-15T10:30:00.000Z",
    "updatedAt": "2024-01-15T10:30:00.000Z",
    "categories": [...],
    "sizes": [...],
    "colorVariations": [...]
  }
  // ... autres produits
]
```

---

## üìã D√©tail Complet de Chaque Champ

### **üè∑Ô∏è Informations Produit Principal**

| Champ | Type | Description | Exemple |
|-------|------|-------------|---------|
| `id` | `number` | Identifiant unique du produit | `1` |
| `name` | `string` | Nom du produit | `"T-Shirt Premium Bio"` |
| `price` | `number` | Prix en FCFA (nombre d√©cimal) | `8500` |
| `stock` | `number` | Quantit√© en stock (entier) | `150` |
| `status` | `string` | Statut de publication | `"PUBLISHED"` ou `"DRAFT"` |
| `description` | `string` | Description d√©taill√©e | `"Un t-shirt doux et r√©sistant..."` |
| `createdAt` | `string` | Date de cr√©ation (ISO 8601) | `"2024-01-15T10:30:00.000Z"` |
| `updatedAt` | `string` | Date de modification (ISO 8601) | `"2024-01-15T10:30:00.000Z"` |

### **üìÇ Categories (Array)**

```json
"categories": [
  {
    "id": 1,
    "name": "T-shirts",
    "description": "Collection de t-shirts pour tous les go√ªts"
  },
  {
    "id": 2,
    "name": "Coton Bio",
    "description": null
  }
]
```

| Champ | Type | Description |
|-------|------|-------------|
| `id` | `number` | ID unique de la cat√©gorie |
| `name` | `string` | Nom de la cat√©gorie |
| `description` | `string` \| `null` | Description optionnelle |

### **üìè Sizes (Array)**

```json
"sizes": [
  {
    "id": 1,
    "productId": 1,
    "sizeName": "S"
  },
  {
    "id": 2,
    "productId": 1,
    "sizeName": "M"
  },
  {
    "id": 3,
    "productId": 1,
    "sizeName": "L"
  }
]
```

| Champ | Type | Description |
|-------|------|-------------|
| `id` | `number` | ID unique de la taille |
| `productId` | `number` | ID du produit associ√© |
| `sizeName` | `string` | Nom de la taille |

### **üé® Color Variations (Array)**

```json
"colorVariations": [
  {
    "id": 1,
    "name": "Rouge Vif",
    "colorCode": "#FF0000",
    "productId": 1,
    "images": [...]
  }
]
```

| Champ | Type | Description |
|-------|------|-------------|
| `id` | `number` | ID unique de la variation |
| `name` | `string` | Nom de la couleur |
| `colorCode` | `string` | Code hexad√©cimal |
| `productId` | `number` | ID du produit |
| `images` | `array` | Tableau d'images pour cette couleur |

### **üñºÔ∏è Images (dans colorVariations)**

```json
"images": [
  {
    "id": 1,
    "view": "Front",
    "url": "https://res.cloudinary.com/printalma/image/upload/v1642253400/products/red_front.jpg",
    "publicId": "products/red_front",
    "colorVariationId": 1,
    "delimitations": [...]
  },
  {
    "id": 2,
    "view": "Back",
    "url": "https://res.cloudinary.com/printalma/image/upload/v1642253401/products/red_back.jpg",
    "publicId": "products/red_back",
    "colorVariationId": 1,
    "delimitations": []
  }
]
```

| Champ | Type | Description |
|-------|------|-------------|
| `id` | `number` | ID unique de l'image |
| `view` | `string` | Vue de l'image |
| `url` | `string` | URL compl√®te Cloudinary |
| `publicId` | `string` | ID Cloudinary pour manipulations |
| `colorVariationId` | `number` | ID de la couleur associ√©e |
| `delimitations` | `array` | Zones d'impression d√©finies |

**Valeurs possibles pour `view`:**
- `"Front"` - Vue de face
- `"Back"` - Vue de dos
- `"Left"` - Vue de gauche
- `"Right"` - Vue de droite
- `"Top"` - Vue du dessus
- `"Bottom"` - Vue du dessous
- `"Detail"` - Vue d√©taill√©e
- Autres valeurs personnalis√©es

### **üìê Delimitations (dans images)**

```json
"delimitations": [
  {
    "id": 1,
    "x": 150.5,
    "y": 100.0,
    "width": 200.0,
    "height": 250.0,
    "rotation": 0.0,
    "productImageId": 1
  }
]
```

| Champ | Type | Description |
|-------|------|-------------|
| `id` | `number` | ID unique de la d√©limitation |
| `x` | `number` | Position X en pixels (d√©cimal) |
| `y` | `number` | Position Y en pixels (d√©cimal) |
| `width` | `number` | Largeur en pixels (d√©cimal) |
| `height` | `number` | Hauteur en pixels (d√©cimal) |
| `rotation` | `number` | Rotation en degr√©s (d√©cimal) |
| `productImageId` | `number` | ID de l'image associ√©e |

---

## üîç Exemple Complet de R√©ponse

```json
[
  {
    "id": 1,
    "name": "T-Shirt Premium Bio",
    "price": 8500,
    "stock": 150,
    "status": "PUBLISHED",
    "description": "Un t-shirt doux et r√©sistant en coton bio, parfait pour l'impression personnalis√©e",
    "createdAt": "2024-01-15T10:30:00.000Z",
    "updatedAt": "2024-01-15T10:30:00.000Z",
    "categories": [
      {
        "id": 1,
        "name": "T-shirts",
        "description": "Collection de t-shirts pour tous les go√ªts"
      },
      {
        "id": 2,
        "name": "Coton Bio",
        "description": null
      }
    ],
    "sizes": [
      {
        "id": 1,
        "productId": 1,
        "sizeName": "S"
      },
      {
        "id": 2,
        "productId": 1,
        "sizeName": "M"
      },
      {
        "id": 3,
        "productId": 1,
        "sizeName": "L"
      }
    ],
    "colorVariations": [
      {
        "id": 1,
        "name": "Rouge Vif",
        "colorCode": "#FF0000",
        "productId": 1,
        "images": [
          {
            "id": 1,
            "view": "Front",
            "url": "https://res.cloudinary.com/printalma/image/upload/v1642253400/products/red_front.jpg",
            "publicId": "products/red_front",
            "colorVariationId": 1,
            "delimitations": [
              {
                "id": 1,
                "x": 150.5,
                "y": 100.0,
                "width": 200.0,
                "height": 250.0,
                "rotation": 0.0,
                "productImageId": 1
              }
            ]
          },
          {
            "id": 2,
            "view": "Back",
            "url": "https://res.cloudinary.com/printalma/image/upload/v1642253401/products/red_back.jpg",
            "publicId": "products/red_back",
            "colorVariationId": 1,
            "delimitations": []
          }
        ]
      },
      {
        "id": 2,
        "name": "Bleu Marine",
        "colorCode": "#000080",
        "productId": 1,
        "images": [
          {
            "id": 3,
            "view": "Front",
            "url": "https://res.cloudinary.com/printalma/image/upload/v1642253402/products/blue_front.jpg",
            "publicId": "products/blue_front",
            "colorVariationId": 2,
            "delimitations": [
              {
                "id": 2,
                "x": 150.5,
                "y": 100.0,
                "width": 200.0,
                "height": 250.0,
                "rotation": 0.0,
                "productImageId": 3
              }
            ]
          }
        ]
      }
    ]
  },
  {
    "id": 2,
    "name": "Hoodie Confort",
    "price": 12000,
    "stock": 75,
    "status": "DRAFT",
    "description": "Hoodie ultra-confortable pour tous les styles",
    "createdAt": "2024-01-16T14:20:00.000Z",
    "updatedAt": "2024-01-16T14:20:00.000Z",
    "categories": [
      {
        "id": 3,
        "name": "Hoodies",
        "description": "Collection de hoodies tendance"
      }
    ],
    "sizes": [
      {
        "id": 4,
        "productId": 2,
        "sizeName": "M"
      },
      {
        "id": 5,
        "productId": 2,
        "sizeName": "L"
      },
      {
        "id": 6,
        "productId": 2,
        "sizeName": "XL"
      }
    ],
    "colorVariations": [
      {
        "id": 3,
        "name": "Noir Mat",
        "colorCode": "#000000",
        "productId": 2,
        "images": [
          {
            "id": 4,
            "view": "Front",
            "url": "https://res.cloudinary.com/printalma/image/upload/v1642253403/products/black_hoodie_front.jpg",
            "publicId": "products/black_hoodie_front",
            "colorVariationId": 3,
            "delimitations": []
          }
        ]
      }
    ]
  }
]
```

---

## üìä Points Techniques Importants

### **üî¢ Types de Donn√©es**

- **Nombres entiers:** `id`, `stock`, `productId`, `colorVariationId`, etc.
- **Nombres d√©cimaux:** `price`, `x`, `y`, `width`, `height`, `rotation`
- **Cha√Ænes:** `name`, `description`, `colorCode`, `view`, `url`, etc.
- **Dates:** Format ISO 8601 avec timezone (`"2024-01-15T10:30:00.000Z"`)
- **√ânum√©rations:** `status` (`"PUBLISHED"` | `"DRAFT"`)

### **üîó Relations**

- Un produit peut avoir **plusieurs cat√©gories** (many-to-many)
- Un produit peut avoir **plusieurs tailles** (one-to-many)
- Un produit peut avoir **plusieurs variations de couleur** (one-to-many)
- Une couleur peut avoir **plusieurs images** (one-to-many)
- Une image peut avoir **plusieurs d√©limitations** (one-to-many)

### **üì¶ Tableaux Vides**

- Si un produit n'a pas de tailles: `"sizes": []`
- Si une couleur n'a pas d'images: `"images": []`
- Si une image n'a pas de d√©limitations: `"delimitations": []`
- Si un produit n'a pas de cat√©gories: `"categories": []`

### **üéØ Valeurs Null**

- `description` d'une cat√©gorie peut √™tre `null`
- Les autres champs sont toujours pr√©sents avec une valeur

---

## üîß Utilisation pour le Frontend

### **Acc√®s aux Donn√©es**

```javascript
// R√©cup√©rer tous les produits
const products = await fetch('/api/products').then(r => r.json());

// Acc√©der aux informations d'un produit
const product = products[0];
console.log(product.name);        // "T-Shirt Premium Bio"
console.log(product.price);       // 8500
console.log(product.status);      // "PUBLISHED"

// Acc√©der aux cat√©gories
product.categories.forEach(cat => {
  console.log(cat.name);          // "T-shirts", "Coton Bio"
});

// Acc√©der aux tailles
product.sizes.forEach(size => {
  console.log(size.sizeName);     // "S", "M", "L"
});

// Acc√©der aux couleurs et images
product.colorVariations.forEach(color => {
  console.log(color.name);        // "Rouge Vif"
  console.log(color.colorCode);   // "#FF0000"
  
  color.images.forEach(image => {
    console.log(image.view);      // "Front", "Back"
    console.log(image.url);       // URL Cloudinary
    
    image.delimitations.forEach(delim => {
      console.log(`Zone: ${delim.width}x${delim.height} √† (${delim.x}, ${delim.y})`);
    });
  });
});
```

### **M√©thodes Utilitaires**

```javascript
// V√©rifier si un produit est publi√©
function isPublished(product) {
  return product.status === 'PUBLISHED';
}

// Obtenir l'image principale d'un produit
function getMainImage(product) {
  return product.colorVariations?.[0]?.images?.[0]?.url || null;
}

// Obtenir toutes les couleurs disponibles
function getAvailableColors(product) {
  return product.colorVariations.map(cv => ({
    name: cv.name,
    code: cv.colorCode
  }));
}

// Obtenir toutes les tailles disponibles
function getAvailableSizes(product) {
  return product.sizes.map(s => s.sizeName);
}
```

---

## ‚ö†Ô∏è Points d'Attention

1. **Pas de pagination** - Tous les produits sont retourn√©s d'un coup
2. **Relations compl√®tes** - Toutes les donn√©es li√©es sont incluses
3. **Ordre par d√©faut** - Tri√©s par date de cr√©ation d√©croissante
4. **Images Cloudinary** - URLs absolues pr√™tes √† utiliser
5. **D√©limitations** - Coordonn√©es en pixels pour d√©finir les zones d'impression

---

Cette documentation couvre **100%** de la structure des donn√©es retourn√©es par `GET /api/products`. Le frontend peut maintenant traiter ces donn√©es de fa√ßon optimale ! üéØ 